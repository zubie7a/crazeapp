<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>CraZe</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://unpkg.com/handsfree@8.5.1/build/lib/assets/handsfree.css">
</head>
<body>
  <!-- Menu Toggle Button -->
  <button type="button" id="menuToggle" class="menu-toggle" aria-label="Open menu">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
    </svg>
  </button>

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <h1>CraZe</h1>
      <button type="button" id="closeSidebar" class="close-btn" aria-label="Close menu">&times;</button>
    </div>

    <div class="sidebar-content">
      <!-- Action Buttons -->
      <div class="button-row">
        <button type="button" id="newBtn" class="btn btn-primary">New</button>
        <button type="button" id="saveBtn" class="btn btn-secondary">Save</button>
        <button type="button" id="undoBtn" class="btn btn-icon" title="Undo (U)">↶</button>
        <button type="button" id="redoBtn" class="btn btn-icon" title="Redo (R)">↷</button>
      </div>

      <!-- Mode Buttons -->
      <div class="button-row">
        <button type="button" id="crazeBtn" class="btn btn-mode">CraZe Mode</button>
        <button type="button" id="handsBtn" class="btn btn-mode">HandsFree</button>
      </div>

      <!-- Info Button -->
      <div class="button-row">
        <button type="button" id="randomizeBtn" class="btn btn-mode">RandomiZe</button>
        <button type="button" id="infoBtn" class="btn btn-mode">
          Info
        </button>
      </div>

      <hr>

      <!-- Brush Selection -->
      <div class="control-group">
        <label for="brushSelect">Brush</label>
        <select id="brushSelect">
          <option value="0">Lines</option>
          <option value="1">Radiant</option>
          <option value="2">Vertical Lines</option>
          <option value="3">Horizontal Lines</option>
          <option value="4">Great Cross</option>
          <option value="5">Triangles</option>
          <option value="6">Squares</option>
          <option value="7">Diamond</option>
          <option value="8">Hexagon</option>
          <option value="9">Snowflake</option>
          <option value="10">Flower</option>
          <option value="11">Moon</option>
          <option value="12">Circles</option>
          <option value="13">Chain</option>
          <option value="14">Insignia</option>
          <option value="15">Four Star</option>
          <option value="16">Six Star</option>
          <option value="17">Eight Star</option>
          <option value="18">Lightning</option>
          <option value="19">Tangent</option>
          <option value="20">Hourglass</option>
          <option value="21">Pinwheel</option>
          <option value="22">Tiles</option>
          <option value="23">Saw</option>
          <option value="24">Seal</option>
          <option value="25">Present</option>
          <option value="26">Arrowhead</option>
          <option value="27">Force</option>
          <option value="28">Window</option>
          <option value="29">XXXXXXX</option>
          <option value="30">ZZZZZZZ</option>
          <option value="31">Comet</option>
          <option value="32">Rectangle</option>
          <option value="33">Parallelogram</option>
          <option value="34">Five Star</option>
          <option value="35">Pentagon</option>
          <option value="36">Fairy</option>
          <option value="37">Heart</option>
          <option value="38">Wave</option>
          <option value="39">Peak</option>
          <option value="40">Trapeze</option>
          <option value="41">Inwards</option>
          <option value="42">Outwards</option>
        </select>
      </div>

      <!-- Palette Selection -->
      <div class="control-group">
        <label for="paletteSelect">Palette</label>
        <select id="paletteSelect">
          <option value="0">Manual</option>
          <option value="1" selected>Rainbows</option>
          <option value="2">Blaze</option>
          <option value="3">Glacier</option>
          <option value="4">Ocean</option>
          <option value="5">Natural</option>
          <option value="6">Bluesky</option>
          <option value="7">Grayscale</option>
          <option value="8">Sepia</option>
          <option value="9">Mystical</option>
          <option value="10">Tropical</option>
          <option value="11">Aurora</option>
          <option value="12">Neon</option>
          <option value="13">Brazil</option>
          <option value="14">Mexico</option>
          <option value="15">Colombia</option>
          <option value="16">Germany</option>
          <option value="17">Netherlands</option>
          <option value="18">India</option>
          <option value="19">Sunset</option>
          <option value="20">Beach</option>
          <option value="21">Future</option>
          <option value="22">Sunny</option>
          <option value="23">Pastel</option>
          <option value="24">Intense</option>
          <option value="25">Dash</option>
          <option value="26">Runner</option>
          <option value="27">Mint</option>
          <option value="28">Viridis</option>
          <option value="29">Happy</option>
          <option value="30">Comfy</option>
          <option value="31">Shiny</option>
          <option value="32">Cyber</option>
          <option value="33">Jupiter</option>
          <option value="34">Blossom</option>
          <option value="35">Holiday</option>
          <option value="36">Sunrise</option>
          <option value="37">Floral</option>
          <option value="38">CMYK</option>
          <option value="39">Daydream</option>
          <option value="40">Cosmos</option>
          <option value="41">Hyperspace</option>
          <option value="42">Golden</option>
          <option value="43">Lime</option>
        </select>
      </div>

      <!-- Manual Color Picker -->
      <div id="colorPicker" class="control-group" style="display: none;">
        <label>Color</label>
        <div class="color-row">
          <input type="color" id="colorInput" value="#ff0000">
          <input type="text" id="colorText" value="#ff0000" maxlength="7">
        </div>
      </div>

      <!-- Transparency -->
      <div class="control-group">
        <label for="alphaSlider">Transparency: <span id="alphaValue">100</span>%</label>
        <input type="range" id="alphaSlider" min="1" max="100" value="100">
      </div>

      <!-- Brush Size -->
      <div class="control-group">
        <label for="sizeSlider">Brush Size: <span id="sizeValue">50</span></label>
        <input type="range" id="sizeSlider" min="1" max="500" value="50">
      </div>

      <!-- Rotations -->
      <div class="control-group">
        <label for="rotSlider">Rotations: <span id="rotValue">6</span></label>
        <input type="range" id="rotSlider" min="1" max="36" value="6">
      </div>

      <!-- Thickness -->
      <div class="control-group">
        <label for="thickSlider">Thickness: <span id="thickValue">2</span></label>
        <input type="range" id="thickSlider" min="1" max="10" value="2">
      </div>

      <hr>

      <!-- Toggle Switches -->
      <div class="toggle-group">
        <label class="toggle">
          <input type="checkbox" id="symmetryToggle" checked>
          <span class="toggle-label">Symmetry Axis</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="variableToggle">
          <span class="toggle-label">Variable Size</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="rotatingToggle">
          <span class="toggle-label">Rotating Shape</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="connectToggle">
          <span class="toggle-label">Connect Borders</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="fillToggle">
          <span class="toggle-label">Fill Shape</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="fadeToggle" checked>
          <span class="toggle-label">Fading Image</span>
        </label>
      </div>

      <!-- Advanced Section -->
      <button type="button" id="advancedToggle" class="btn btn-text">
        Advanced Options <span id="advancedArrow">▼</span>
      </button>

      <div id="advancedSection" class="advanced-section">
        <div class="toggle-group">
          <label class="toggle">
            <input type="checkbox" id="gridToggle">
            <span class="toggle-label">Fit to Grid</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="perspectiveToggle">
            <span class="toggle-label">Perspective Size</span>
          </label>
        </div>
        <div class="button-row">
          <button type="button" id="setCenterBtn" class="btn btn-small">Set Center</button>
          <button type="button" id="resetCenterBtn" class="btn btn-small">Reset Center</button>
        </div>
      </div>
    </div>
  </aside>

  <!-- Overlay for closing sidebar on mobile -->
  <div id="overlay" class="overlay"></div>

  <!-- Welcome Popup Modal -->
  <div id="welcomeModal" class="modal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">Welcome to CraZe!</h2>
      </div>
      <div class="modal-body">
        <div id="modalMessage"></div>
      </div>
      <div class="modal-footer">
        <button type="button" id="modalOkBtn" class="btn btn-primary">OK</button>
      </div>
    </div>
  </div>

  <!-- Canvas Container -->
  <main class="canvas-container">
    <canvas id="mainCanvas"></canvas>
    <canvas id="overlayCanvas"></canvas>
  </main>

  <!-- Scripts - load in order, no modules -->
  <script src="https://unpkg.com/handsfree@8.5.1/build/lib/handsfree.js"></script>
  <!-- Engine utilities -->
  <script src="js/engine/Maths.js"></script>
  <script src="js/engine/Drawing.js"></script>
  <!-- Brush system -->
  <script src="js/brushes/Point.js"></script>
  <script src="js/brushes/Brush.js"></script>
  <script src="js/brushes/loadBrushes.js"></script>
  <script src="js/brushes/BrushGenerator.js"></script>
  <!-- Palette system -->
  <script src="js/palettes/Palette.js"></script>
  <script src="js/palettes/loadPalettes.js"></script>
  <script src="js/palettes/PaletteGenerator.js"></script>
  <!-- Drawing engine -->
  <script src="js/drawingEngine.js"></script>
  <!-- Randomization -->
  <script src="js/randomize.js"></script>
  <!-- CraZeMode and Parameters -->
  <script src="js/crazeMode.js"></script>
  <script src="js/parameters.js"></script>
  <!-- Main app -->
  <script src="js/app.js"></script>
</body>
</html>
